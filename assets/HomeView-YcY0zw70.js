import{d as B,r as _,c as x,a as u,n as F,b as y,e as c,f as M,w as P,t as V,F as S,g as O,h as I,i as Y,o as l,_ as E,j as N,u as q,s as A,k as j,S as z,l as C,A as G,m as L,p as J,I as U,q as X}from"./index-CVtsP_hU.js";import{u as H,_ as W}from"./FolderCard.vue_vue_type_style_index_0_lang-B7MUZ8Nk.js";const K={class:"node-icon"},Q={class:"node-label"},Z={key:0,class:"node-children"},ee=B({__name:"TreeNode",props:{node:{type:Object,required:!0},depth:{type:Number,default:0}},emits:["node-click","drop"],setup(m,{emit:T}){const f=m,h=T,v=_(!0),p=_(!1),o=_(!1),i=_(!1),d=x(()=>f.node.children&&f.node.children.length>0),s=()=>{v.value=!v.value},n=()=>{h("node-click",f.node)},a=t=>{t.dataTransfer&&(t.dataTransfer.setData("text/plain",f.node.id),t.dataTransfer.effectAllowed="move")},g=t=>{const e=t.currentTarget.getBoundingClientRect(),D=t.clientY-e.top;return D<e.height*.25?"before":D>e.height*.75?"after":"inside"},k=t=>{t.preventDefault();const e=g(t);o.value=e==="before",p.value=e==="inside",i.value=e==="after"},w=t=>{if(t.preventDefault(),!t.dataTransfer)return;const e=g(t);o.value=e==="before",p.value=e==="inside",i.value=e==="after",t.dataTransfer.dropEffect="move"},b=t=>{const e=t.currentTarget.getBoundingClientRect();(t.clientX<e.left||t.clientX>=e.right||t.clientY<e.top||t.clientY>=e.bottom)&&(o.value=!1,p.value=!1,i.value=!1)},r=t=>{if(t.preventDefault(),!t.dataTransfer)return;const e=t.dataTransfer.getData("text/plain");if(e===f.node.id)return;const D=g(t);h("drop",e,f.node.id,D),o.value=!1,p.value=!1,i.value=!1};return(t,e)=>{const D=Y("TreeNode",!0);return l(),u("div",{class:y(["node",{"is-folder":d.value,"drag-over-inside":p.value,"drag-over-before":o.value,"drag-over-after":i.value}]),style:F({paddingLeft:`${m.depth*20}px`}),draggable:"true",onDragstart:a,onDragover:w,onDrop:r,onDragenter:k,onDragleave:b},[c("div",{class:y(["drop-indicator before",{active:o.value}])},null,2),c("div",{class:y(["node-content",{"drag-over":p.value}]),onClick:n},[d.value?(l(),u("button",{key:0,class:"toggle-btn",onClick:P(s,["stop"])},V(v.value?"â–¼":"â–¶"),1)):M("",!0),c("span",K,V(d.value?"ðŸ“":"ðŸ“„"),1),c("span",Q,V(m.node.name),1)],2),c("div",{class:y(["drop-indicator after",{active:i.value}])},null,2),d.value&&v.value?(l(),u("div",Z,[(l(!0),u(S,null,O(m.node.children,R=>(l(),I(D,{key:R.id,node:R,depth:m.depth+1,onNodeClick:e[0]||(e[0]=$=>t.$emit("node-click",$)),onDrop:e[1]||(e[1]=$=>t.$emit("drop",$))},null,8,["node","depth"]))),128))])):M("",!0)],38)}}}),te=E(ee,[["__scopeId","data-v-ab4b3193"]]),ne={class:"tree-view"},ae=["data-node-id"],oe=B({__name:"TreeView",props:{nodes:{type:Array,required:!0}},emits:["update:nodes","node-click"],setup(m,{emit:T}){const f=m,h=T,v=o=>{h("node-click",o)},p=(o,i,d)=>{const s=JSON.parse(JSON.stringify(f.nodes));let n=null,a=null,g=null,k=null;const w=(r,t=null)=>{for(let e=0;e<r.length;e++)r[e].id===o&&(n=r[e],a=t||s),r[e].id===i&&(g=r[e],k=t||s),r[e].children&&w(r[e].children,r[e].children)};if(w(s),!n||!g||!a)return;const b=a.findIndex(r=>r.id===o);if(a.splice(b,1),d==="inside"&&g)g.children||(g.children=[]),g.children.push(n);else if(k){const r=k.findIndex(e=>e.id===i),t=d==="after"?r+1:r;k.splice(t,0,n)}h("update:nodes",s)};return(o,i)=>(l(),u("div",ne,[(l(!0),u(S,null,O(m.nodes,d=>(l(),u("div",{class:"tree-node",key:d.id,"data-node-id":d.id},[N(te,{node:d,depth:0,onNodeClick:v,onDrop:p},null,8,["node"])],8,ae))),128))]))}}),de=E(oe,[["__scopeId","data-v-9106d95a"]]),se={class:"body"},re={class:"header"},le={class:"folders-grid"},ie={class:"recipes-grid"},ce=10,pe=B({__name:"HomeView",setup(m){const T=q(),f=H(),h=x(()=>f.folders),v=x(()=>T.recipes),p=x(()=>v.value.slice().sort((s,n)=>s.dateOpened&&n.dateOpened?new Date(s.dateOpened).getTime()-new Date(n.dateOpened).getTime():s.dateModified&&n.dateModified?new Date(s.dateModified).getTime()-new Date(n.dateModified).getTime():new Date(s.dateCreated).getTime()-new Date(n.dateCreated).getTime()).slice(0,ce)),o=_([{id:"1",name:"Recipes",children:[{id:"2",name:"Desserts",children:[{id:"3",name:"Chocolate Cake"}]},{id:"4",name:"Main Dishes",children:[]}]},{id:"5",name:"Pasta Recipe"}]),i=s=>{console.log("Clicked node:",s)},d=_([{value:"grid",checked:localStorage.getItem("home-view-mode")==="grid"||!0,icon:A(U)},{value:"list",checked:localStorage.getItem("home-view-mode")==="list"||!1,icon:A(X)}]);return(s,n)=>(l(),u("div",se,[c("div",re,[n[2]||(n[2]=c("h5",null,"Welcome to wasfa",-1)),N(z,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=a=>d.value=a)},null,8,["modelValue"])]),d.value[0].checked?(l(),I(G,{key:0,multiple:""},{default:C(()=>[N(L,{open:""},{header:C(()=>n[3]||(n[3]=[c("span",null,"Your Folders",-1)])),default:C(()=>[c("div",le,[(l(!0),u(S,null,O(h.value,a=>(l(),u("div",{key:a.id},[N(W,{folder:a},null,8,["folder"])]))),128))])]),_:1}),N(L,{open:""},{header:C(()=>n[4]||(n[4]=[c("span",null,"Suggested Recipes",-1)])),default:C(()=>[c("div",ie,[(l(!0),u(S,null,O(p.value,a=>(l(),I(J,{key:a.id,recipe:a,simple:""},null,8,["recipe"]))),128))])]),_:1})]),_:1})):(l(),I(de,{key:1,nodes:o.value,"onUpdate:nodes":n[1]||(n[1]=a=>o.value=a),onNodeClick:i},null,8,["nodes"])),n[5]||(n[5]=j(" /> "))]))}});export{pe as default};
